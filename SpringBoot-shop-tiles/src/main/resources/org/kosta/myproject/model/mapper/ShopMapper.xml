<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.kosta.myproject.model.mapper.ShopMapper">
<select id="list" resultType="goodsVO">
 select g.gdsNum, g.gdsName, g.middlecateCode
 ,g.gdsStock
, g.gdsDes
, g.gdsImg
, g.gdsDate
, g.gdsImg
, g.gdsThumbImg
, m.middlecateName
, c.cateCode
, c.cateName
 from tbl_goods g inner join  middle_category m on g.middlecateCode =m.middlecateCode
 inner join  goods_category c on m.cateCode =c.cateCode
 where g.middlecateCode =#{middlecateCode}
</select>

<select id="categorylist" resultType="goodsVO">
  select g.gdsNum, g.gdsName, g.middlecateCode
 ,g.gdsStock
, g.gdsDes
, g.gdsImg
, g.gdsDate
, g.gdsImg
, g.gdsThumbImg
, m.middlecateName
, c.cateCode
, c.cateName
 from tbl_goods g inner join  middle_category m on g.middlecateCode =m.middlecateCode
 inner join  goods_category c on m.cateCode =c.cateCode
 where c.cateCode  =#{cateCode}
</select>

<select id="categorylist2" resultType="goodsVO">
  select g.gdsNum, g.gdsName, g.middlecateCode
 ,g.gdsStock
, g.gdsDes
, g.gdsImg
, g.gdsDate
, g.gdsImg
, g.gdsThumbImg
, m.middlecateName
, c.cateCode
, c.cateName
 from tbl_goods g inner join  middle_category m on g.middlecateCode =m.middlecateCode
 inner join  goods_category c on m.cateCode =c.cateCode
 where g.middlecateCode =#{middlecateCode}
</select> 	
<select id="view" resultType="goodsVO">
		select
		gdsNum,gdsName,middlecateCode,gdsPrice,gdsStock,gdsDes, gdsImg,
		gdsDate,gdsThumbImg
		from tbl_goods
		where gdsNum=#{gdsNum}
	</select>
	
	<insert id="addCart">
	insert into tbl_cart(cartNum, id, gdsNum, cartStock)
		values(tbl_cart_seq.nextval,#{id},#{gdsNum},#{cartStock})	
	</insert>
	
	<select id="cartList" resultType="CartListVO">
 select
     row_number() over(order by c.cartNum desc) as num,
     c.cartNum, c.id, c.gdsNum, c.cartStock, c.addDate,
     g.gdsName, g.gdsPrice, g.gdsThumbImg
 from tbl_cart c
     inner join tbl_goods g
         on c.gdsNum = g.gdsNum   
     where c.id = #{id}
</select>

<delete id="deleteCart">
delete tbl_cart  
where cartNum = #{cartNum}
  
</delete>
	
 	
</mapper>










